<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prediction Service</title>
    <script>
        function sendTrainingData(event) {
    event.preventDefault(); // Зупинка стандартної події форми

    const fileInput = document.getElementById('training_data_file');
    if (fileInput.files.length === 0) {
        alert("Please select a JSON file.");
        return;
    }

    const file = fileInput.files[0];
    const reader = new FileReader();

    reader.onload = function() {
        const trainingData = reader.result;

        fetch('/train_model', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: trainingData
        })
        .then(response => response.json())
        .then(data => {
            if (data.message && data.accuracy !== undefined) {
                alert(data.message + '. Accuracy: ' + data.accuracy);
            } else {
                alert('Unexpected response format: ' + JSON.stringify(data));
            }
        })
        .catch(error => {
            alert('Error: ' + error);
        });
    };

    reader.readAsText(file); // Читання вмісту файлу як тексту
}

        function sendPredictionData(event) {
            event.preventDefault();

            const data = {
                fever: Number(document.getElementById('fever').value),
                cough: Number(document.getElementById('cough').value),
                fatigue: Number(document.getElementById('fatigue').value),
                difficulty_breathing: Number(document.getElementById('difficulty_breathing').value),
                age: Number(document.getElementById('age').value),
                gender: Number(document.getElementById('gender').value),
                blood_pressure: Number(document.getElementById('blood_pressure').value),
                cholesterol_level: Number(document.getElementById('cholesterol_level').value)
            };

            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                alert('Prediction: ' + data.prediction);
            })
            .catch(error => {
                alert('Error: ' + error);
            });
        }
    </script>
</head>
<body>
    <h1>AI Prediction Service</h1>

    <h2>Train Model</h2>
    <form onsubmit="sendTrainingData(event)">
        <label for="training_data_file">Upload training data in JSON format:</label><br>
        <input type="file" id="training_data_file" name="training_data_file" accept=".json"><br>
        <input type="submit" value="Train Model">
    </form>

    <h2>Predict Symptoms</h2>
    <form onsubmit="sendPredictionData(event)">
        <label for="fever">Fever (0 or 1):</label>
        <input type="number" id="fever" name="fever" required><br>

        <label for="cough">Cough (0 or 1):</label>
        <input type="number" id="cough" name="cough" required><br>

        <label for="fatigue">Fatigue (0 or 1):</label>
        <input type="number" id="fatigue" name="fatigue" required><br>

        <label for="difficulty_breathing">Difficulty Breathing (0 or 1):</label>
        <input type="number" id="difficulty_breathing" name="difficulty_breathing" required><br>

        <label for="age">Age:</label>
        <input type="number" id="age" name="age" required><br>

        <label for="gender">Gender (0 for male, 1 for female):</label>
        <input type="number" id="gender" name="gender" required><br>

        <label for="blood_pressure">Blood Pressure:</label>
        <input type="number" id="blood_pressure" name="blood_pressure" required><br>

        <label for="cholesterol_level">Cholesterol Level:</label>
        <input type="number" id="cholesterol_level" name="cholesterol_level" required><br>

        <input type="submit" value="Predict">
    </form>
</body>
</html>

